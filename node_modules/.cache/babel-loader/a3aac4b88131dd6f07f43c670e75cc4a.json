{"ast":null,"code":"import { v4 as uuidv4 } from \"uuid\";\nimport myOwnScript from './constants.js';\nconst initialState = {\n  rodsRows: [],\n  nodesRows: [],\n  changingRodIndex: null,\n  changingRodInputRow: {\n    area: \"\",\n    isAreaCorrect: true,\n    length: \"\",\n    isLengthCorrect: true,\n    modulus: \"\",\n    isModulusCorrect: true,\n    sigma: \"\",\n    isSigmaCorrect: true,\n    distLoad: \"\",\n    isDistLoadCorrect: true\n  },\n  newRodInputRow: {\n    area: \"\",\n    isAreaCorrect: true,\n    length: \"\",\n    isLengthCorrect: true,\n    modulus: \"\",\n    isModulusCorrect: true,\n    sigma: \"\",\n    isSigmaCorrect: true,\n    distLoad: \"\",\n    isDistLoadCorrect: true\n  },\n  newNodeInputRow: {\n    nodeNumber: \"\",\n    isNodeNumberCorrect: true,\n    nodeForce: \"\",\n    isNodeForceCorrect: true\n  },\n  changingNodeIndex: null,\n  changingNodeInputRow: {\n    nodeNumber: \"\",\n    isNodeNumberCorrect: true,\n    nodeForce: \"\",\n    isNodeForceCorrect: true\n  },\n  leftSupport: {\n    nodeNumber: null,\n    isChecked: false\n  },\n  rightSupport: {\n    nodeNumber: null,\n    isChecked: false\n  },\n  isError: false,\n  errorMessage: \"Конструкция не введена\",\n  isReadyForSave: false,\n  objWithSolutionFunctions: null,\n  isCanvasShown: false\n};\n\nconst rodsAndNodesReducer = (state = initialState, action) => {\n  let value = action.value;\n  let isCorrect = true;\n\n  switch (action.type) {\n    case NEW_ROD_AREA_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        newRodInputRow: { ...state.newRodInputRow,\n          area: value,\n          isAreaCorrect: isCorrect\n        }\n      };\n\n    case NEW_ROD_LENGTH_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        newRodInputRow: { ...state.newRodInputRow,\n          length: value,\n          isLengthCorrect: isCorrect\n        }\n      };\n\n    case NEW_ROD_MODULUS_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        newRodInputRow: { ...state.newRodInputRow,\n          modulus: value,\n          isModulusCorrect: isCorrect\n        }\n      };\n\n    case NEW_ROD_SIGMA_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        newRodInputRow: { ...state.newRodInputRow,\n          sigma: value,\n          isSigmaCorrect: isCorrect\n        }\n      };\n\n    case NEW_ROD_DISTLOAD_CHANGED:\n      if (isNaN(Number(value))) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        newRodInputRow: { ...state.newRodInputRow,\n          distLoad: value,\n          isDistLoadCorrect: isCorrect\n        }\n      };\n\n    case ADD_NEW_ROD:\n      if (state.newRodInputRow.area.length !== 0 && state.newRodInputRow.isAreaCorrect && state.newRodInputRow.length.length !== 0 && state.newRodInputRow.isLengthCorrect && state.newRodInputRow.modulus.length !== 0 && state.newRodInputRow.isModulusCorrect && state.newRodInputRow.sigma.length !== 0 && state.newRodInputRow.isSigmaCorrect && state.newRodInputRow.distLoad.length !== 0 && state.newRodInputRow.isDistLoadCorrect) {\n        const newObj = { ...state,\n          rodsRows: [...state.rodsRows, {\n            index: state.rodsRows.length + 1,\n            area: Number(state.newRodInputRow.area),\n            length: Number(state.newRodInputRow.length),\n            modulus: Number(state.newRodInputRow.modulus),\n            sigma: Number(state.newRodInputRow.sigma),\n            distLoad: Number(state.newRodInputRow.distLoad),\n            reactKey: uuidv4()\n          }],\n          newRodInputRow: {\n            area: \"\",\n            isAreaCorrect: true,\n            length: \"\",\n            isLengthCorrect: true,\n            modulus: \"\",\n            isModulusCorrect: true,\n            sigma: \"\",\n            isSigmaCorrect: true,\n            distLoad: \"\",\n            isDistLoadCorrect: true\n          }\n        };\n        return newObj;\n      } else {\n        return { ...state,\n          newRodInputRow: { ...state.newRodInputRow,\n            isAreaCorrect: state.newRodInputRow.area.length !== 0 && state.newRodInputRow.isAreaCorrect,\n            isLengthCorrect: state.newRodInputRow.length.length !== 0 && state.newRodInputRow.isLengthCorrect,\n            isModulusCorrect: state.newRodInputRow.modulus.length !== 0 && state.newRodInputRow.isModulusCorrect,\n            isSigmaCorrect: state.newRodInputRow.sigma.length !== 0 && state.newRodInputRow.isSigmaCorrect,\n            isDistLoadCorrect: state.newRodInputRow.distLoad.length !== 0 && state.newRodInputRow.isDistLoadCorrect\n          }\n        };\n      }\n\n    case CHANGE_ROD:\n      return { ...state,\n        changingRodIndex: action.index,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          area: state.rodsRows[action.index - 1].area,\n          length: state.rodsRows[action.index - 1].length,\n          modulus: state.rodsRows[action.index - 1].modulus,\n          sigma: state.rodsRows[action.index - 1].sigma,\n          distLoad: state.rodsRows[action.index - 1].distLoad\n        }\n      };\n\n    case CHANGING_ROD_AREA_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          area: value,\n          isAreaCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_ROD_LENGTH_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          length: value,\n          isLengthCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_ROD_MODULUS_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          modulus: value,\n          isModulusCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_ROD_SIGMA_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          sigma: value,\n          isSigmaCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_ROD_DISTLOAD_CHANGED:\n      if (isNaN(Number(value))) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingRodInputRow: { ...state.changingRodInputRow,\n          distLoad: value,\n          isDistLoadCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_ROD_SUBMIT:\n      {\n        if (state.changingRodInputRow.area.length !== 0 && state.changingRodInputRow.isAreaCorrect && state.changingRodInputRow.length.length !== 0 && state.changingRodInputRow.isLengthCorrect && state.changingRodInputRow.modulus.length !== 0 && state.changingRodInputRow.isModulusCorrect && state.changingRodInputRow.sigma.length !== 0 && state.changingRodInputRow.isSigmaCorrect && state.changingRodInputRow.distLoad.length !== 0 && state.changingRodInputRow.isDistLoadCorrect) {\n          const changedRodData = {\n            index: state.changingRodIndex,\n            area: Number(state.changingRodInputRow.area),\n            length: Number(state.changingRodInputRow.length),\n            modulus: Number(state.changingRodInputRow.modulus),\n            sigma: Number(state.changingRodInputRow.sigma),\n            distLoad: Number(state.changingRodInputRow.distLoad)\n          };\n          let changedRodsRows = JSON.parse(JSON.stringify(state.rodsRows));\n          changedRodsRows.splice(state.changingRodIndex - 1, 1, changedRodData);\n          const newObj = { ...state,\n            rodsRows: changedRodsRows,\n            changingRodIndex: null,\n            changingRodInputRow: {\n              area: \"\",\n              isAreaCorrect: true,\n              length: \"\",\n              isLengthCorrect: true,\n              modulus: \"\",\n              isModulusCorrect: true,\n              sigma: \"\",\n              isSigmaCorrect: true,\n              distLoad: \"\",\n              isDistLoadCorrect: true\n            }\n          };\n          return newObj;\n        } else {\n          return { ...state,\n            changingRodInputRow: { ...state.changingRodInputRow,\n              isAreaCorrect: state.changingRodInputRow.area.length !== 0 && state.changingRodInputRow.isAreaCorrect,\n              isLengthCorrect: state.changingRodInputRow.length.length !== 0 && state.changingRodInputRow.isLengthCorrect,\n              isModulusCorrect: state.changingRodInputRow.modulus.length !== 0 && state.changingRodInputRow.isModulusCorrect,\n              isSigmaCorrect: state.changingRodInputRow.sigma.length !== 0 && state.changingRodInputRow.isSigmaCorrect,\n              isDistLoadCorrect: state.changingRodInputRow.distLoad.length !== 0 && state.changingRodInputRow.isDistLoadCorrect\n            }\n          };\n        }\n      }\n\n    case REMOVE_ROD_ROW:\n      let filteredRodsRows = [...state.rodsRows];\n      filteredRodsRows.splice(action.index - 1, 1);\n      filteredRodsRows.forEach((rodRow, index) => {\n        rodRow.index = index + 1;\n      });\n      return { ...state,\n        rodsRows: filteredRodsRows,\n        isReadyForSave: filteredRodsRows.length > 0\n      };\n\n    case ADD_NODE_ROW:\n      if (state.newNodeInputRow.nodeNumber.length !== 0 && state.newNodeInputRow.isNodeNumberCorrect && state.newNodeInputRow.nodeForce.length !== 0 && state.newNodeInputRow.isNodeForceCorrect) {\n        const newNodeData = {\n          nodeNumber: Number(state.newNodeInputRow.nodeNumber),\n          nodeForce: Number(state.newNodeInputRow.nodeForce),\n          reactKey: uuidv4()\n        };\n        return { ...state,\n          nodesRows: [...state.nodesRows, newNodeData],\n          newNodeInputRow: {\n            nodeNumber: \"\",\n            isNodeNumberCorrect: true,\n            nodeForce: \"\",\n            isNodeForceCorrect: true\n          }\n        };\n      } else {\n        return { ...state,\n          newNodeInputRow: { ...state.newNodeInputRow,\n            isNodeNumberCorrect: state.newNodeInputRow.nodeNumber.length !== 0 && state.newNodeInputRow.isNodeNumberCorrect,\n            isNodeForceCorrect: state.newNodeInputRow.nodeForce.length !== 0 && state.newNodeInputRow.isNodeForceCorrect\n          }\n        };\n      }\n\n    case NEW_NODE_NUMBER_CHANGED:\n      {\n        if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n          isCorrect = false;\n        }\n\n        return { ...state,\n          newNodeInputRow: { ...state.newNodeInputRow,\n            nodeNumber: value,\n            isNodeNumberCorrect: isCorrect\n          }\n        };\n      }\n\n    case NEW_NODE_FORCE_CHANGED:\n      {\n        if (isNaN(Number(value)) || value.length === 0) {\n          isCorrect = false;\n        }\n\n        return { ...state,\n          newNodeInputRow: { ...state.newNodeInputRow,\n            nodeForce: value,\n            isNodeForceCorrect: isCorrect\n          }\n        };\n      }\n\n    case CHANGE_NODE:\n      return { ...state,\n        changingNodeIndex: action.index,\n        changingNodeInputRow: { ...state.changingNodeInputRow,\n          nodeNumber: state.nodesRows[action.index].nodeNumber,\n          nodeForce: state.nodesRows[action.index].nodeForce\n        }\n      };\n\n    case CHANGING_NODE_NUMBER_CHANGED:\n      if (isNaN(Number(value)) || Number(value) <= 0 && value.length !== 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingNodeInputRow: { ...state.changingNodeInputRow,\n          nodeNumber: value,\n          isNodeNumberCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_NODE_FORCE_CHANGED:\n      if (isNaN(Number(value)) || value.length === 0) {\n        isCorrect = false;\n      }\n\n      return { ...state,\n        changingNodeInputRow: { ...state.changingNodeInputRow,\n          nodeForce: value,\n          isNodeForceCorrect: isCorrect\n        }\n      };\n\n    case CHANGING_NODE_SUBMIT:\n      if (state.changingNodeInputRow.nodeNumber.length !== 0 && state.changingNodeInputRow.isNodeNumberCorrect && state.changingNodeInputRow.nodeForce.length !== 0 && state.changingNodeInputRow.isNodeForceCorrect) {\n        const changedNodeData = {\n          nodeNumber: Number(state.changingNodeInputRow.nodeNumber),\n          nodeForce: Number(state.changingNodeInputRow.nodeForce),\n          reactKey: uuidv4()\n        };\n        let changedNodesRows = JSON.parse(JSON.stringify(state.nodesRows));\n        changedNodesRows.splice(state.changingNodeIndex, 1, changedNodeData);\n        return { ...state,\n          nodesRows: changedNodesRows,\n          changingNodeIndex: null,\n          changingNodeInputRow: {\n            nodeNumber: \"\",\n            isNodeNumberCorrect: true,\n            nodeForce: \"\",\n            isNodeForceCorrect: true\n          }\n        };\n      } else {\n        return { ...state,\n          newNodeInputRow: { ...state.newNodeInputRow,\n            isNodeNumberCorrect: state.newNodeInputRow.nodeNumber.length !== 0 && state.newNodeInputRow.isNodeNumberCorrect,\n            isNodeForceCorrect: state.newNodeInputRow.nodeForce.length !== 0 && state.newNodeInputRow.isNodeForceCorrect\n          }\n        };\n      }\n\n    case REMOVE_NODE_ROW:\n      let filteredNodesRows = [...state.nodesRows];\n      filteredNodesRows.splice(action.index, 1);\n      return { ...state,\n        nodesRows: filteredNodesRows\n      };\n\n    case CHANGE_LEFT_SUPPORT:\n      if (state.rodsRows.length !== 0) {\n        return { ...state,\n          leftSupport: {\n            nodeNumber: action.isChecked ? 1 : null,\n            isChecked: action.isChecked\n          }\n        };\n      }\n\n      return { ...state,\n        leftSupport: {\n          nodeNumber: null,\n          isChecked: action.isChecked\n        }\n      };\n\n    case CHANGE_RIGHT_SUPPORT:\n      if (state.rodsRows.length !== 0) {\n        return { ...state,\n          rightSupport: {\n            nodeNumber: action.isChecked ? state.rodsRows.length + 1 : null,\n            isChecked: action.isChecked\n          }\n        };\n      }\n\n      return { ...state,\n        rightSupport: {\n          nodeNumber: null,\n          isChecked: action.isChecked\n        }\n      };\n\n    case CHECK_FOR_ERROR:\n      if (!(state.leftSupport.isChecked || state.rightSupport.isChecked)) {\n        return { ...state,\n          isError: true,\n          isCanvasShown: false,\n          errorMessage: \"В конструкции должна быть хотя бы одна заделка\",\n          isReadyForSave: false\n        };\n      } else if (state.changingRodIndex !== null) {\n        return { ...state,\n          isError: true,\n          isCanvasShown: false,\n          errorMessage: \"Закончите изменение стержня\",\n          isReadyForSave: false\n        };\n      } else if (state.rodsRows.length < 1) {\n        return { ...state,\n          isError: true,\n          isCanvasShown: false,\n          errorMessage: \"В конструкции отсутствуют стержни\",\n          isReadyForSave: false\n        };\n      } else if (state.rodsRows.length === 0 && state.nodesRows.length !== 0 || state.rodsRows.length >= 1 && Math.max(...state.nodesRows.map(node => node.nodeNumber)) > state.rodsRows.length + 1) {\n        return { ...state,\n          isError: true,\n          isCanvasShown: false,\n          errorMessage: `Узел ${Math.max(...state.nodesRows.map(node => node.nodeNumber))} не существует в конструкции`,\n          isReadyForSave: false\n        };\n      } else {\n        return { ...state,\n          isError: false,\n          isCanvasShown: true,\n          errorMessage: \"\",\n          isReadyForSave: true\n        };\n      }\n\n    case SET_NEW_CONSTRUCTION_FROM_FILE_DATA:\n      {\n        return { ...action.newConstructionObj\n        };\n      }\n\n    case SAVE_SOLUTION:\n      return { ...state,\n        objWithSolutionFunctions: action.solution\n      };\n\n    case CLEAR_SOLUTION:\n      return { ...state,\n        objWithSolutionFunctions: null\n      };\n\n    case SHOW_CANVAS:\n      return { ...state,\n        isCanvasShown: true\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default rodsAndNodesReducer;\nexport const addNewRod = () => ({\n  type: ADD_NEW_ROD\n});\nexport const newRodAreaChanged = value => ({\n  type: NEW_ROD_AREA_CHANGED,\n  value\n});\nexport const newRodLengthChanged = value => ({\n  type: NEW_ROD_LENGTH_CHANGED,\n  value\n});\nexport const newRodModulusChanged = value => ({\n  type: NEW_ROD_MODULUS_CHANGED,\n  value\n});\nexport const newRodSigmaChanged = value => ({\n  type: NEW_ROD_SIGMA_CHANGED,\n  value\n});\nexport const newRodDistLoadChanged = value => ({\n  type: NEW_ROD_DISTLOAD_CHANGED,\n  value\n});\nexport const changeRod = index => ({\n  type: CHANGE_ROD,\n  index\n});\nexport const changingRodAreaChanged = value => ({\n  type: CHANGING_ROD_AREA_CHANGED,\n  value\n});\nexport const changingRodLengthChanged = value => ({\n  type: CHANGING_ROD_LENGTH_CHANGED,\n  value\n});\nexport const changingRodModulusChanged = value => ({\n  type: CHANGING_ROD_MODULUS_CHANGED,\n  value\n});\nexport const changingRodSigmaChanged = value => ({\n  type: CHANGING_ROD_SIGMA_CHANGED,\n  value\n});\nexport const changingRodDistLoadChanged = value => ({\n  type: CHANGING_ROD_DISTLOAD_CHANGED,\n  value\n});\nexport const changingRodSubmit = () => ({\n  type: CHANGING_ROD_SUBMIT\n});\nexport const removeRodRow = index => ({\n  type: REMOVE_ROD_ROW,\n  index\n});\nexport const addNodeRow = () => ({\n  type: ADD_NODE_ROW\n});\nexport const removeNodeRow = index => ({\n  type: REMOVE_NODE_ROW,\n  index\n});\nexport const changeNode = index => ({\n  type: CHANGE_NODE,\n  index\n});\nexport const newNodeNumberChanged = value => ({\n  type: NEW_NODE_NUMBER_CHANGED,\n  value\n});\nexport const newNodeForceChanged = value => ({\n  type: NEW_NODE_FORCE_CHANGED,\n  value\n});\nexport const changingNodeNumberChanged = value => ({\n  type: CHANGING_NODE_NUMBER_CHANGED,\n  value\n});\nexport const changingNodeForceChanged = value => ({\n  type: CHANGING_NODE_FORCE_CHANGED,\n  value\n});\nexport const changingNodeSubmit = () => ({\n  type: CHANGING_NODE_SUBMIT\n});\nexport const changeLeftSupport = isChecked => ({\n  type: CHANGE_LEFT_SUPPORT,\n  isChecked\n});\nexport const changeRightSupport = isChecked => ({\n  type: CHANGE_RIGHT_SUPPORT,\n  isChecked\n});\nexport const checkForError = () => ({\n  type: CHECK_FOR_ERROR\n});\nexport const downloadConstruction = () => (dispatch, getState) => {\n  dispatch(checkForError());\n\n  if (getState().rodsAndNodes.isReadyForSave) {\n    const state = getState().rodsAndNodes;\n    const objForDownload = {\n      rods: state.rodsRows.map(rod => {\n        return [rod.area, rod.length, rod.modulus, rod.sigma, rod.distLoad];\n      }),\n      nodes: state.nodesRows.map(node => [node.nodeNumber, node.nodeForce]),\n      left: state.leftSupport.nodeNumber ? true : false,\n      right: state.rightSupport.nodeNumber ? true : false\n    };\n    let a = document.createElement(\"a\");\n    a.setAttribute(\"download\", \"construction.json\");\n    a.href = \"data:text/plain;charset=utf-8,\" + encodeURIComponent(JSON.stringify(objForDownload, null, \"\\t\"));\n    a.click();\n  }\n};\nexport const setNewConstructionFromFileData = newConstructionObj => ({\n  type: SET_NEW_CONSTRUCTION_FROM_FILE_DATA,\n  newConstructionObj\n});\nexport const showFileReadingError = message => ({\n  type: SHOW_CONSTRUCTION_FROM_FILE_ERROR,\n  message\n});\nexport const handleFileOpening = inputRef => (dispatch, getState) => {\n  const reader = new FileReader();\n\n  reader.onload = () => {\n    let data = JSON.parse(reader.result);\n    let newConstructionObj = {};\n    newConstructionObj.rodsRows = data.rods.map((rodData, index) => {\n      return {\n        index: index + 1,\n        area: rodData[0],\n        length: rodData[1],\n        modulus: rodData[2],\n        sigma: rodData[3],\n        distLoad: rodData[4],\n        reactKey: uuidv4()\n      };\n    });\n    newConstructionObj.nodesRows = data.nodes.map((nodeData, index) => {\n      return {\n        nodeNumber: nodeData[0],\n        nodeForce: nodeData[1],\n        reactKey: uuidv4()\n      };\n    });\n    newConstructionObj.leftSupport = {\n      nodeNumber: data.left ? 1 : null,\n      isChecked: data.left\n    };\n    newConstructionObj.rightSupport = {\n      nodeNumber: data.right ? newConstructionObj.rodsRows.length + 1 : null,\n      isChecked: data.right\n    };\n    newConstructionObj.changingRodIndex = null;\n    newConstructionObj.changingRodInputRow = {\n      area: \"\",\n      isAreaCorrect: true,\n      length: \"\",\n      isLengthCorrect: true,\n      modulus: \"\",\n      isModulusCorrect: true,\n      sigma: \"\",\n      isSigmaCorrect: true,\n      distLoad: \"\",\n      isDistLoadCorrect: true\n    };\n    newConstructionObj.newRodInputRow = {\n      area: \"\",\n      isAreaCorrect: true,\n      length: \"\",\n      isLengthCorrect: true,\n      modulus: \"\",\n      isModulusCorrect: true,\n      sigma: \"\",\n      isSigmaCorrect: true,\n      distLoad: \"\",\n      isDistLoadCorrect: true\n    };\n    newConstructionObj.newNodeInputRow = {\n      nodeNumber: \"\",\n      isNodeNumberCorrect: true,\n      nodeForce: \"\",\n      isNodeForceCorrect: true\n    };\n    newConstructionObj.changingNodeIndex = null;\n    newConstructionObj.changingNodeInputRow = {\n      nodeNumber: \"\",\n      isNodeNumberCorrect: true,\n      nodeForce: \"\",\n      isNodeForceCorrect: true\n    };\n    newConstructionObj.isError = false;\n    newConstructionObj.errorMessage = \"\";\n    newConstructionObj.isReadyForSave = true;\n    newConstructionObj.objWithSolutionFunctions = null;\n    dispatch(setNewConstructionFromFileData(newConstructionObj));\n  };\n\n  reader.readAsText(inputRef.current.files[0]);\n};\nexport const saveSolution = solutionObj => ({\n  type: SAVE_SOLUTION,\n  solution: solutionObj\n});\nexport const clearSolution = () => ({\n  type: CLEAR_SOLUTION\n});\nexport const showCanvas = () => ({\n  type: SHOW_CANVAS\n});","map":{"version":3,"sources":["C:/Users/glush/Desktop/react-sapr-main/src/reducers/reducer.js"],"names":["v4","uuidv4","myOwnScript","initialState","rodsRows","nodesRows","changingRodIndex","changingRodInputRow","area","isAreaCorrect","length","isLengthCorrect","modulus","isModulusCorrect","sigma","isSigmaCorrect","distLoad","isDistLoadCorrect","newRodInputRow","newNodeInputRow","nodeNumber","isNodeNumberCorrect","nodeForce","isNodeForceCorrect","changingNodeIndex","changingNodeInputRow","leftSupport","isChecked","rightSupport","isError","errorMessage","isReadyForSave","objWithSolutionFunctions","isCanvasShown","rodsAndNodesReducer","state","action","value","isCorrect","type","NEW_ROD_AREA_CHANGED","isNaN","Number","NEW_ROD_LENGTH_CHANGED","NEW_ROD_MODULUS_CHANGED","NEW_ROD_SIGMA_CHANGED","NEW_ROD_DISTLOAD_CHANGED","ADD_NEW_ROD","newObj","index","reactKey","CHANGE_ROD","CHANGING_ROD_AREA_CHANGED","CHANGING_ROD_LENGTH_CHANGED","CHANGING_ROD_MODULUS_CHANGED","CHANGING_ROD_SIGMA_CHANGED","CHANGING_ROD_DISTLOAD_CHANGED","CHANGING_ROD_SUBMIT","changedRodData","changedRodsRows","JSON","parse","stringify","splice","REMOVE_ROD_ROW","filteredRodsRows","forEach","rodRow","ADD_NODE_ROW","newNodeData","NEW_NODE_NUMBER_CHANGED","NEW_NODE_FORCE_CHANGED","CHANGE_NODE","CHANGING_NODE_NUMBER_CHANGED","CHANGING_NODE_FORCE_CHANGED","CHANGING_NODE_SUBMIT","changedNodeData","changedNodesRows","REMOVE_NODE_ROW","filteredNodesRows","CHANGE_LEFT_SUPPORT","CHANGE_RIGHT_SUPPORT","CHECK_FOR_ERROR","Math","max","map","node","SET_NEW_CONSTRUCTION_FROM_FILE_DATA","newConstructionObj","SAVE_SOLUTION","solution","CLEAR_SOLUTION","SHOW_CANVAS","addNewRod","newRodAreaChanged","newRodLengthChanged","newRodModulusChanged","newRodSigmaChanged","newRodDistLoadChanged","changeRod","changingRodAreaChanged","changingRodLengthChanged","changingRodModulusChanged","changingRodSigmaChanged","changingRodDistLoadChanged","changingRodSubmit","removeRodRow","addNodeRow","removeNodeRow","changeNode","newNodeNumberChanged","newNodeForceChanged","changingNodeNumberChanged","changingNodeForceChanged","changingNodeSubmit","changeLeftSupport","changeRightSupport","checkForError","downloadConstruction","dispatch","getState","rodsAndNodes","objForDownload","rods","rod","nodes","left","right","a","document","createElement","setAttribute","href","encodeURIComponent","click","setNewConstructionFromFileData","showFileReadingError","message","SHOW_CONSTRUCTION_FROM_FILE_ERROR","handleFileOpening","inputRef","reader","FileReader","onload","data","result","rodData","nodeData","readAsText","current","files","saveSolution","solutionObj","clearSolution","showCanvas"],"mappings":"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","sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\n\nimport myOwnScript from './constants.js';\n\nconst initialState = {\n    rodsRows: [],\n    nodesRows: [],\n    changingRodIndex: null,\n    changingRodInputRow: {\n        area: \"\",\n        isAreaCorrect: true,\n        length: \"\",\n        isLengthCorrect: true,\n        modulus: \"\",\n        isModulusCorrect: true,\n        sigma   : \"\",\n        isSigmaCorrect: true,\n        distLoad: \"\",\n        isDistLoadCorrect: true,\n    },\n    newRodInputRow: {\n        area: \"\",\n        isAreaCorrect: true,\n        length: \"\",\n        isLengthCorrect: true,\n        modulus: \"\",\n        isModulusCorrect: true,\n        sigma: \"\",\n        isSigmaCorrect: true,\n        distLoad: \"\",\n        isDistLoadCorrect: true,\n    },\n    newNodeInputRow: {\n        nodeNumber: \"\",\n        isNodeNumberCorrect: true,\n        nodeForce: \"\",\n        isNodeForceCorrect: true,\n    },\n    changingNodeIndex: null,\n    changingNodeInputRow: {\n        nodeNumber: \"\",\n        isNodeNumberCorrect: true,\n        nodeForce: \"\",\n        isNodeForceCorrect: true,\n    },\n    leftSupport: {\n        nodeNumber: null,\n        isChecked: false,\n    },\n    rightSupport: {\n        nodeNumber: null,\n        isChecked: false,\n    },\n    isError: false,\n    errorMessage: \"Конструкция не введена\",\n    isReadyForSave: false,\n    objWithSolutionFunctions: null,\n    isCanvasShown: false\n};\n\nconst rodsAndNodesReducer = (state = initialState, action) => {\n    let value = action.value;\n    let isCorrect = true;\n\n    switch (action.type) {\n        case NEW_ROD_AREA_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newRodInputRow: {\n                    ...state.newRodInputRow,\n                    area: value,\n                    isAreaCorrect: isCorrect,\n                },\n            };\n        case NEW_ROD_LENGTH_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newRodInputRow: {\n                    ...state.newRodInputRow,\n                    length: value,\n                    isLengthCorrect: isCorrect,\n                },\n            };\n        case NEW_ROD_MODULUS_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newRodInputRow: {\n                    ...state.newRodInputRow,\n                    modulus: value,\n                    isModulusCorrect: isCorrect,\n                },\n            };\n        case NEW_ROD_SIGMA_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newRodInputRow: {\n                    ...state.newRodInputRow,\n                    sigma: value,\n                    isSigmaCorrect: isCorrect,\n                },\n            };\n        case NEW_ROD_DISTLOAD_CHANGED:\n            if (isNaN(Number(value))) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newRodInputRow: {\n                    ...state.newRodInputRow,\n                    distLoad: value,\n                    isDistLoadCorrect: isCorrect,\n                },\n            };\n        case ADD_NEW_ROD:\n            if (\n                state.newRodInputRow.area.length !== 0 &&\n                state.newRodInputRow.isAreaCorrect &&\n                state.newRodInputRow.length.length !== 0 &&\n                state.newRodInputRow.isLengthCorrect &&\n                state.newRodInputRow.modulus.length !== 0 &&\n                state.newRodInputRow.isModulusCorrect &&\n                state.newRodInputRow.sigma.length !== 0 &&\n                state.newRodInputRow.isSigmaCorrect &&\n                state.newRodInputRow.distLoad.length !== 0 &&\n                state.newRodInputRow.isDistLoadCorrect\n            ) {\n                const newObj = {\n                    ...state,\n                    rodsRows: [\n                        ...state.rodsRows,\n                        {\n                            index: state.rodsRows.length + 1,\n                            area: Number(state.newRodInputRow.area),\n                            length: Number(state.newRodInputRow.length),\n                            modulus: Number(state.newRodInputRow.modulus),\n                            sigma: Number(state.newRodInputRow.sigma),\n                            distLoad: Number(state.newRodInputRow.distLoad),\n                            reactKey: uuidv4(),\n                        },\n                    ],\n                    newRodInputRow: {\n                        area: \"\",\n                        isAreaCorrect: true,\n                        length: \"\",\n                        isLengthCorrect: true,\n                        modulus: \"\",\n                        isModulusCorrect: true,\n                        sigma: \"\",\n                        isSigmaCorrect: true,\n                        distLoad: \"\",\n                        isDistLoadCorrect: true,\n                    },\n                };\n                return newObj;\n            } else {\n                return {\n                    ...state,\n                    newRodInputRow: {\n                        ...state.newRodInputRow,\n                        isAreaCorrect:\n                            state.newRodInputRow.area.length !== 0 &&\n                            state.newRodInputRow.isAreaCorrect,\n                        isLengthCorrect:\n                            state.newRodInputRow.length.length !== 0 &&\n                            state.newRodInputRow.isLengthCorrect,\n                        isModulusCorrect:\n                            state.newRodInputRow.modulus.length !== 0 &&\n                            state.newRodInputRow.isModulusCorrect,\n                        isSigmaCorrect:\n                            state.newRodInputRow.sigma.length !== 0 &&\n                            state.newRodInputRow.isSigmaCorrect,\n                        isDistLoadCorrect:\n                            state.newRodInputRow.distLoad.length !== 0 &&\n                            state.newRodInputRow.isDistLoadCorrect,\n                    },\n                };\n            }\n        case CHANGE_ROD:\n            return {\n                ...state,\n                changingRodIndex: action.index,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    area: state.rodsRows[action.index - 1].area,\n                    length: state.rodsRows[action.index - 1].length,\n                    modulus: state.rodsRows[action.index - 1].modulus,\n                    sigma: state.rodsRows[action.index - 1].sigma,\n                    distLoad: state.rodsRows[action.index - 1].distLoad,\n                },\n            };\n        case CHANGING_ROD_AREA_CHANGED:\n            if (isNaN(Number(value)) || Number(value) <= 0) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    area: value,\n                    isAreaCorrect: isCorrect,\n                },\n            };\n        case CHANGING_ROD_LENGTH_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    length: value,\n                    isLengthCorrect: isCorrect,\n                },\n            };\n        case CHANGING_ROD_MODULUS_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    modulus: value,\n                    isModulusCorrect: isCorrect,\n                },\n            };\n        case CHANGING_ROD_SIGMA_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    sigma: value,\n                    isSigmaCorrect: isCorrect,\n                },\n            };\n        case CHANGING_ROD_DISTLOAD_CHANGED:\n            if (isNaN(Number(value))) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingRodInputRow: {\n                    ...state.changingRodInputRow,\n                    distLoad: value,\n                    isDistLoadCorrect: isCorrect,\n                },\n            };\n        case CHANGING_ROD_SUBMIT: {\n            if (\n                state.changingRodInputRow.area.length !== 0 &&\n                state.changingRodInputRow.isAreaCorrect &&\n                state.changingRodInputRow.length.length !== 0 &&\n                state.changingRodInputRow.isLengthCorrect &&\n                state.changingRodInputRow.modulus.length !== 0 &&\n                state.changingRodInputRow.isModulusCorrect &&\n                state.changingRodInputRow.sigma.length !== 0 &&\n                state.changingRodInputRow.isSigmaCorrect &&\n                state.changingRodInputRow.distLoad.length !== 0 &&\n                state.changingRodInputRow.isDistLoadCorrect\n            ) {\n                const changedRodData = {\n                    index: state.changingRodIndex,\n                    area: Number(state.changingRodInputRow.area),\n                    length: Number(state.changingRodInputRow.length),\n                    modulus: Number(state.changingRodInputRow.modulus),\n                    sigma: Number(state.changingRodInputRow.sigma),\n                    distLoad: Number(state.changingRodInputRow.distLoad),\n                };\n                let changedRodsRows = JSON.parse(\n                    JSON.stringify(state.rodsRows)\n                );\n                changedRodsRows.splice(\n                    state.changingRodIndex - 1,\n                    1,\n                    changedRodData\n                );\n\n                const newObj = {\n                    ...state,\n                    rodsRows: changedRodsRows,\n                    changingRodIndex: null,\n                    changingRodInputRow: {\n                        area: \"\",\n                        isAreaCorrect: true,\n                        length: \"\",\n                        isLengthCorrect: true,\n                        modulus: \"\",\n                        isModulusCorrect: true,\n                        sigma: \"\",\n                        isSigmaCorrect: true,\n                        distLoad: \"\",\n                        isDistLoadCorrect: true,\n                    },\n                };\n                return newObj;\n            } else {\n                return {\n                    ...state,\n                    changingRodInputRow: {\n                        ...state.changingRodInputRow,\n                        isAreaCorrect:\n                            state.changingRodInputRow.area.length !== 0 &&\n                            state.changingRodInputRow.isAreaCorrect,\n                        isLengthCorrect:\n                            state.changingRodInputRow.length.length !== 0 &&\n                            state.changingRodInputRow.isLengthCorrect,\n                        isModulusCorrect:\n                            state.changingRodInputRow.modulus.length !== 0 &&\n                            state.changingRodInputRow.isModulusCorrect,\n                        isSigmaCorrect:\n                            state.changingRodInputRow.sigma.length !== 0 &&\n                            state.changingRodInputRow.isSigmaCorrect,\n                        isDistLoadCorrect:\n                            state.changingRodInputRow.distLoad.length !== 0 &&\n                            state.changingRodInputRow.isDistLoadCorrect,\n                    },\n                };\n            }\n        }\n        case REMOVE_ROD_ROW:\n            let filteredRodsRows = [...state.rodsRows];\n            filteredRodsRows.splice(action.index - 1, 1);\n            filteredRodsRows.forEach((rodRow, index) => {\n                rodRow.index = index + 1;\n            });\n\n            return {\n                ...state,\n                rodsRows: filteredRodsRows,\n                isReadyForSave: filteredRodsRows.length > 0,\n            };\n        case ADD_NODE_ROW:\n            if (\n                state.newNodeInputRow.nodeNumber.length !== 0 &&\n                state.newNodeInputRow.isNodeNumberCorrect &&\n                state.newNodeInputRow.nodeForce.length !== 0 &&\n                state.newNodeInputRow.isNodeForceCorrect\n            ) {\n                const newNodeData = {\n                    nodeNumber: Number(state.newNodeInputRow.nodeNumber),\n                    nodeForce: Number(state.newNodeInputRow.nodeForce),\n                    reactKey: uuidv4(),\n                };\n                return {\n                    ...state,\n                    nodesRows: [...state.nodesRows, newNodeData],\n                    newNodeInputRow: {\n                        nodeNumber: \"\",\n                        isNodeNumberCorrect: true,\n                        nodeForce: \"\",\n                        isNodeForceCorrect: true,\n                    },\n                };\n            } else {\n                return {\n                    ...state,\n                    newNodeInputRow: {\n                        ...state.newNodeInputRow,\n                        isNodeNumberCorrect:\n                            state.newNodeInputRow.nodeNumber.length !== 0 &&\n                            state.newNodeInputRow.isNodeNumberCorrect,\n                        isNodeForceCorrect:\n                            state.newNodeInputRow.nodeForce.length !== 0 &&\n                            state.newNodeInputRow.isNodeForceCorrect,\n                    },\n                };\n            }\n        case NEW_NODE_NUMBER_CHANGED: {\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newNodeInputRow: {\n                    ...state.newNodeInputRow,\n                    nodeNumber: value,\n                    isNodeNumberCorrect: isCorrect,\n                },\n            };\n        }\n        case NEW_NODE_FORCE_CHANGED: {\n            if (isNaN(Number(value)) || value.length === 0) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                newNodeInputRow: {\n                    ...state.newNodeInputRow,\n                    nodeForce: value,\n                    isNodeForceCorrect: isCorrect,\n                },\n            };\n        }\n        case CHANGE_NODE:\n            return {\n                ...state,\n                changingNodeIndex: action.index,\n                changingNodeInputRow: {\n                    ...state.changingNodeInputRow,\n                    nodeNumber: state.nodesRows[action.index].nodeNumber,\n                    nodeForce: state.nodesRows[action.index].nodeForce,\n                },\n            };\n        case CHANGING_NODE_NUMBER_CHANGED:\n            if (\n                isNaN(Number(value)) ||\n                (Number(value) <= 0 && value.length !== 0)\n            ) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingNodeInputRow: {\n                    ...state.changingNodeInputRow,\n                    nodeNumber: value,\n                    isNodeNumberCorrect: isCorrect,\n                },\n            };\n        case CHANGING_NODE_FORCE_CHANGED:\n            if (isNaN(Number(value)) || value.length === 0) {\n                isCorrect = false;\n            }\n            return {\n                ...state,\n                changingNodeInputRow: {\n                    ...state.changingNodeInputRow,\n                    nodeForce: value,\n                    isNodeForceCorrect: isCorrect,\n                },\n            };\n        case CHANGING_NODE_SUBMIT:\n            if (\n                state.changingNodeInputRow.nodeNumber.length !== 0 &&\n                state.changingNodeInputRow.isNodeNumberCorrect &&\n                state.changingNodeInputRow.nodeForce.length !== 0 &&\n                state.changingNodeInputRow.isNodeForceCorrect\n            ) {\n                const changedNodeData = {\n                    nodeNumber: Number(state.changingNodeInputRow.nodeNumber),\n                    nodeForce: Number(state.changingNodeInputRow.nodeForce),\n                    reactKey: uuidv4(),\n                };\n                let changedNodesRows = JSON.parse(\n                    JSON.stringify(state.nodesRows)\n                );\n                changedNodesRows.splice(\n                    state.changingNodeIndex,\n                    1,\n                    changedNodeData\n                );\n                return {\n                    ...state,\n                    nodesRows: changedNodesRows,\n                    changingNodeIndex: null,\n                    changingNodeInputRow: {\n                        nodeNumber: \"\",\n                        isNodeNumberCorrect: true,\n                        nodeForce: \"\",\n                        isNodeForceCorrect: true,\n                    },\n                };\n            } else {\n                return {\n                    ...state,\n                    newNodeInputRow: {\n                        ...state.newNodeInputRow,\n                        isNodeNumberCorrect:\n                            state.newNodeInputRow.nodeNumber.length !== 0 &&\n                            state.newNodeInputRow.isNodeNumberCorrect,\n                        isNodeForceCorrect:\n                            state.newNodeInputRow.nodeForce.length !== 0 &&\n                            state.newNodeInputRow.isNodeForceCorrect,\n                    },\n                };\n            }\n        case REMOVE_NODE_ROW:\n            let filteredNodesRows = [...state.nodesRows];\n            filteredNodesRows.splice(action.index, 1);\n            return {\n                ...state,\n                nodesRows: filteredNodesRows,\n            };\n\n        case CHANGE_LEFT_SUPPORT:\n            if (state.rodsRows.length !== 0) {\n                return {\n                    ...state,\n                    leftSupport: {\n                        nodeNumber: action.isChecked ? 1 : null,\n                        isChecked: action.isChecked,\n                    },\n                };\n            }\n            return {\n                ...state,\n                leftSupport: {\n                    nodeNumber: null,\n                    isChecked: action.isChecked,\n                },\n            };\n        case CHANGE_RIGHT_SUPPORT:\n            if (state.rodsRows.length !== 0) {\n                return {\n                    ...state,\n                    rightSupport: {\n                        nodeNumber: action.isChecked\n                            ? state.rodsRows.length + 1\n                            : null,\n                        isChecked: action.isChecked,\n                    },\n                };\n            }\n            return {\n                ...state,\n                rightSupport: {\n                    nodeNumber: null,\n                    isChecked: action.isChecked,\n                },\n            };\n        case CHECK_FOR_ERROR:\n            if (\n                !(state.leftSupport.isChecked || state.rightSupport.isChecked)\n            ) {\n                return {\n                    ...state,\n                    isError: true,\n                    isCanvasShown: false,\n                    errorMessage:\n                        \"В конструкции должна быть хотя бы одна заделка\",\n                    isReadyForSave: false,\n                };\n            } else if (state.changingRodIndex !== null) {\n                return {\n                    ...state,\n                    isError: true,\n                    isCanvasShown: false,\n                    errorMessage: \"Закончите изменение стержня\",\n                    isReadyForSave: false,\n                };\n            } else if (state.rodsRows.length < 1) {\n                return {\n                    ...state,\n                    isError: true,\n                    isCanvasShown: false,\n                    errorMessage: \"В конструкции отсутствуют стержни\",\n                    isReadyForSave: false,\n                };\n            } else if (\n                (state.rodsRows.length === 0 && state.nodesRows.length !== 0) ||\n                (state.rodsRows.length >= 1 &&\n                    Math.max(\n                        ...state.nodesRows.map((node) => node.nodeNumber)\n                    ) >\n                        state.rodsRows.length + 1)\n            ) {\n                return {\n                    ...state,\n                    isError: true,\n                    isCanvasShown: false,\n                    errorMessage: `Узел ${Math.max(\n                        ...state.nodesRows.map((node) => node.nodeNumber)\n                    )} не существует в конструкции`,\n                    isReadyForSave: false,\n                };\n            } else {\n                return {\n                    ...state,\n                    isError: false,\n                    isCanvasShown: true,\n                    errorMessage: \"\",\n                    isReadyForSave: true,\n                };\n            }\n        case SET_NEW_CONSTRUCTION_FROM_FILE_DATA: {\n            return {\n                ...action.newConstructionObj,\n            };\n        }\n        case SAVE_SOLUTION:\n            return {\n                ...state,\n                objWithSolutionFunctions: action.solution,\n            };\n        case CLEAR_SOLUTION:\n            return {\n                ...state,\n                objWithSolutionFunctions: null,\n            };\n        case SHOW_CANVAS :\n            return {\n                ...state,\n                isCanvasShown: true\n            }\n        default:\n            return state;\n    }\n};\n\nexport default rodsAndNodesReducer;\n\nexport const addNewRod = () => ({ type: ADD_NEW_ROD });\nexport const newRodAreaChanged = (value) => ({\n    type: NEW_ROD_AREA_CHANGED,\n    value,\n});\nexport const newRodLengthChanged = (value) => ({\n    type: NEW_ROD_LENGTH_CHANGED,\n    value,\n});\nexport const newRodModulusChanged = (value) => ({\n    type: NEW_ROD_MODULUS_CHANGED,\n    value,\n});\nexport const newRodSigmaChanged = (value) => ({\n    type: NEW_ROD_SIGMA_CHANGED,\n    value,\n});\nexport const newRodDistLoadChanged = (value) => ({\n    type: NEW_ROD_DISTLOAD_CHANGED,\n    value,\n});\n\nexport const changeRod = (index) => ({\n    type: CHANGE_ROD,\n    index,\n});\nexport const changingRodAreaChanged = (value) => ({\n    type: CHANGING_ROD_AREA_CHANGED,\n    value,\n});\nexport const changingRodLengthChanged = (value) => ({\n    type: CHANGING_ROD_LENGTH_CHANGED,\n    value,\n});\nexport const changingRodModulusChanged = (value) => ({\n    type: CHANGING_ROD_MODULUS_CHANGED,\n    value,\n});\nexport const changingRodSigmaChanged = (value) => ({\n    type: CHANGING_ROD_SIGMA_CHANGED,\n    value,\n});\nexport const changingRodDistLoadChanged = (value) => ({\n    type: CHANGING_ROD_DISTLOAD_CHANGED,\n    value,\n});\n\nexport const changingRodSubmit = () => ({\n    type: CHANGING_ROD_SUBMIT,\n});\n\nexport const removeRodRow = (index) => ({\n    type: REMOVE_ROD_ROW,\n    index,\n});\n\nexport const addNodeRow = () => ({\n    type: ADD_NODE_ROW,\n});\n\nexport const removeNodeRow = (index) => ({\n    type: REMOVE_NODE_ROW,\n    index,\n});\n\nexport const changeNode = (index) => ({\n    type: CHANGE_NODE,\n    index,\n});\n\nexport const newNodeNumberChanged = (value) => ({\n    type: NEW_NODE_NUMBER_CHANGED,\n    value,\n});\n\nexport const newNodeForceChanged = (value) => ({\n    type: NEW_NODE_FORCE_CHANGED,\n    value,\n});\n\nexport const changingNodeNumberChanged = (value) => ({\n    type: CHANGING_NODE_NUMBER_CHANGED,\n    value,\n});\n\nexport const changingNodeForceChanged = (value) => ({\n    type: CHANGING_NODE_FORCE_CHANGED,\n    value,\n});\n\nexport const changingNodeSubmit = () => ({\n    type: CHANGING_NODE_SUBMIT,\n});\n\nexport const changeLeftSupport = (isChecked) => ({\n    type: CHANGE_LEFT_SUPPORT,\n    isChecked,\n});\n\nexport const changeRightSupport = (isChecked) => ({\n    type: CHANGE_RIGHT_SUPPORT,\n    isChecked,\n});\n\nexport const checkForError = () => ({ type: CHECK_FOR_ERROR });\n\nexport const downloadConstruction = () => (dispatch, getState) => {\n    dispatch(checkForError());\n    if (getState().rodsAndNodes.isReadyForSave) {\n        const state = getState().rodsAndNodes;\n        const objForDownload = {\n            rods: state.rodsRows.map((rod) => {\n                return [\n                    rod.area,\n                    rod.length,\n                    rod.modulus,\n                    rod.sigma,\n                    rod.distLoad,\n                ];\n            }),\n            nodes: state.nodesRows.map((node) => [\n                node.nodeNumber,\n                node.nodeForce,\n            ]),\n            left: state.leftSupport.nodeNumber ? true : false,\n            right: state.rightSupport.nodeNumber ? true : false,\n        };\n        let a = document.createElement(\"a\");\n        a.setAttribute(\"download\", \"construction.json\");\n        a.href =\n            \"data:text/plain;charset=utf-8,\" +\n            encodeURIComponent(JSON.stringify(objForDownload, null, \"\\t\"));\n        a.click();\n    }\n};\n\nexport const setNewConstructionFromFileData = (newConstructionObj) => ({\n    type: SET_NEW_CONSTRUCTION_FROM_FILE_DATA,\n    newConstructionObj,\n});\n\nexport const showFileReadingError = (message) => ({\n    type: SHOW_CONSTRUCTION_FROM_FILE_ERROR,\n    message,\n});\n\nexport const handleFileOpening = (inputRef) => (dispatch, getState) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        let data = JSON.parse(reader.result);\n        let newConstructionObj = {};\n        newConstructionObj.rodsRows = data.rods.map((rodData, index) => {\n            return {\n                index: index + 1,\n                area: rodData[0],\n                length: rodData[1],\n                modulus: rodData[2],\n                sigma: rodData[3],\n                distLoad: rodData[4],\n                reactKey: uuidv4(),\n            };\n        });\n        newConstructionObj.nodesRows = data.nodes.map((nodeData, index) => {\n            return {\n                nodeNumber: nodeData[0],\n                nodeForce: nodeData[1],\n                reactKey: uuidv4(),\n            };\n        });\n        newConstructionObj.leftSupport = {\n            nodeNumber: data.left ? 1 : null,\n            isChecked: data.left,\n        };\n        newConstructionObj.rightSupport = {\n            nodeNumber: data.right\n                ? newConstructionObj.rodsRows.length + 1\n                : null,\n            isChecked: data.right,\n        };\n        newConstructionObj.changingRodIndex = null;\n        newConstructionObj.changingRodInputRow = {\n            area: \"\",\n            isAreaCorrect: true,\n            length: \"\",\n            isLengthCorrect: true,\n            modulus: \"\",\n            isModulusCorrect: true,\n            sigma: \"\",\n            isSigmaCorrect: true,\n            distLoad: \"\",\n            isDistLoadCorrect: true,\n        };\n        newConstructionObj.newRodInputRow = {\n            area: \"\",\n            isAreaCorrect: true,\n            length: \"\",\n            isLengthCorrect: true,\n            modulus: \"\",\n            isModulusCorrect: true,\n            sigma: \"\",\n            isSigmaCorrect: true,\n            distLoad: \"\",\n            isDistLoadCorrect: true,\n        };\n        newConstructionObj.newNodeInputRow = {\n            nodeNumber: \"\",\n            isNodeNumberCorrect: true,\n            nodeForce: \"\",\n            isNodeForceCorrect: true,\n        };\n        newConstructionObj.changingNodeIndex = null;\n        newConstructionObj.changingNodeInputRow = {\n            nodeNumber: \"\",\n            isNodeNumberCorrect: true,\n            nodeForce: \"\",\n            isNodeForceCorrect: true,\n        };\n        newConstructionObj.isError = false;\n        newConstructionObj.errorMessage = \"\";\n        newConstructionObj.isReadyForSave = true;\n        newConstructionObj.objWithSolutionFunctions = null;\n        dispatch(setNewConstructionFromFileData(newConstructionObj));\n    };\n    reader.readAsText(inputRef.current.files[0]);\n};\n\nexport const saveSolution = (solutionObj) => ({\n    type: SAVE_SOLUTION,\n    solution: solutionObj,\n});\n\nexport const clearSolution = () => ({\n    type: CLEAR_SOLUTION,\n});\n\nexport const showCanvas = () => ({\n    type: SHOW_CANVAS\n})\n"]},"metadata":{},"sourceType":"module"}