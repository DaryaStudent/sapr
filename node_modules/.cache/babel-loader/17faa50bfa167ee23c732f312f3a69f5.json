{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\glush\\\\Desktop\\\\react-sapr-main\\\\src\\\\components\\\\PostProcessor\\\\PostProcessorTable.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\n\nfunction PostProcessorTable({\n  rodsSigmas,\n  rodsLengths,\n  objWithSolutionFunctions\n}) {\n  _s();\n\n  const [chosenRodForTable, setChosenRodForTable] = useState(1);\n  const [stepForTable, setStepForTable] = useState(0.1);\n  const [isStepForTableCorrect, setIsStepForTableCorrect] = useState(true);\n  const [isTableShown, setIsTableShown] = useState(false);\n  const [tableData, setTableData] = useState([]);\n\n  function fixTail(num, n = 5) {\n    const biasedNumStr = (num + 10 ** (-n - 1)).toFixed(n);\n    return Number(biasedNumStr);\n  }\n\n  function handleShowTableButtonClick() {\n    if (isStepForTableCorrect) {\n      let data = [];\n      let xStartPos = 0;\n      let totalIterations = parseInt(rodsLengths[chosenRodForTable - 1] / Number(stepForTable), 10);\n\n      for (let i = 0; i <= totalIterations; i++) {\n        data.push({\n          x: fixTail(xStartPos),\n          NValue: fixTail(objWithSolutionFunctions.N[chosenRodForTable - 1](fixTail(xStartPos))),\n          UValue: fixTail(objWithSolutionFunctions.U[chosenRodForTable - 1](fixTail(xStartPos))),\n          SValue: fixTail(objWithSolutionFunctions.S[chosenRodForTable - 1](fixTail(xStartPos)))\n        });\n        xStartPos = fixTail(xStartPos + Number(stepForTable));\n      }\n\n      if (totalIterations !== rodsLengths[chosenRodForTable - 1] / Number(stepForTable)) {\n        data.push({\n          x: rodsLengths[chosenRodForTable - 1],\n          UValue: objWithSolutionFunctions.U[chosenRodForTable - 1](fixTail(rodsLengths[chosenRodForTable - 1])),\n          NValue: objWithSolutionFunctions.N[chosenRodForTable - 1](fixTail(rodsLengths[chosenRodForTable - 1])),\n          SValue: objWithSolutionFunctions.S[chosenRodForTable - 1](fixTail(rodsLengths[chosenRodForTable - 1]))\n        });\n      }\n\n      setTableData(data);\n      setIsTableShown(true);\n    }\n  }\n\n  function handleStepForTableChange(e) {\n    const valueStr = e.target.value.replace(\",\", \".\");\n\n    if (Number(valueStr) <= 0 || Number(valueStr) > rodsLengths[chosenRodForTable - 1] || isNaN(valueStr)) {\n      setIsStepForTableCorrect(false);\n    } else {\n      setIsStepForTableCorrect(true);\n    }\n\n    setStepForTable(valueStr);\n  }\n\n  function handleSavingTableData() {\n    if (isTableShown) {\n      const csvArr = [];\n      const rows = [[\"x\", \"N(x)\", \"U(x)\", \"S(x)\"]];\n      tableData.forEach(row => {\n        rows.push([row.x, row.NValue, row.UValue, row.SValue]);\n      });\n      rows.forEach(row => {\n        csvArr.push(row.join(\",\"));\n      });\n      const csvFile = new Blob([csvArr.join(\"\\n\")], {\n        type: \"text/csv\"\n      });\n      const a = document.createElement(\"a\");\n      a.href = URL.createObjectURL(csvFile);\n      a.setAttribute(\"download\", \"values.csv\");\n      document.body.appendChild(a);\n      a.click();\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-processor-table\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post-processor-table-interface\"\n  }, /*#__PURE__*/React.createElement(\"div\", null, \"\\u0421\\u0442\\u0435\\u0440\\u0436\\u0435\\u043D\\u044C\", /*#__PURE__*/React.createElement(\"select\", {\n    value: chosenRodForTable,\n    onChange: e => setChosenRodForTable(Number(e.target.value))\n  }, rodsLengths.map((rodLength, index) => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      value: index + 1\n    }, index + 1);\n  }))), /*#__PURE__*/React.createElement(\"div\", null, \"\\u0428\\u0430\\u0433:\", /*#__PURE__*/React.createElement(\"input\", {\n    className: `step-for-table-input ${isStepForTableCorrect ? null : `error`}`,\n    type: \"number\",\n    value: stepForTable,\n    onChange: handleStepForTableChange\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleShowTableButtonClick\n  }, \"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\")), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleSavingTableData\n  }, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"))), isTableShown ? /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"table\", null, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"x\"), /*#__PURE__*/React.createElement(\"th\", null, \"N(x)\"), /*#__PURE__*/React.createElement(\"th\", null, \"U(x)\"), /*#__PURE__*/React.createElement(\"th\", null, \"\\u03C3(x)\"))), /*#__PURE__*/React.createElement(\"tbody\", null, tableData.map((dataRow, index) => {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: index\n    }, /*#__PURE__*/React.createElement(\"td\", null, dataRow.x), /*#__PURE__*/React.createElement(\"td\", null, dataRow.NValue), /*#__PURE__*/React.createElement(\"td\", null, dataRow.UValue), /*#__PURE__*/React.createElement(\"td\", {\n      className: Math.abs(dataRow.SValue) > rodsSigmas[chosenRodForTable - 1] ? \"out-of-limit\" : null\n    }, dataRow.SValue));\n  })))) : null);\n}\n\n_s(PostProcessorTable, \"6oA9WqJSbfMNKnGVYmPCJGwB1+o=\");\n\n_c = PostProcessorTable;\nexport default PostProcessorTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostProcessorTable\");","map":{"version":3,"sources":["C:/Users/glush/Desktop/react-sapr-main/src/components/PostProcessor/PostProcessorTable.js"],"names":["React","useState","PostProcessorTable","rodsSigmas","rodsLengths","objWithSolutionFunctions","chosenRodForTable","setChosenRodForTable","stepForTable","setStepForTable","isStepForTableCorrect","setIsStepForTableCorrect","isTableShown","setIsTableShown","tableData","setTableData","fixTail","num","n","biasedNumStr","toFixed","Number","handleShowTableButtonClick","data","xStartPos","totalIterations","parseInt","i","push","x","NValue","N","UValue","U","SValue","S","handleStepForTableChange","e","valueStr","target","value","replace","isNaN","handleSavingTableData","csvArr","rows","forEach","row","join","csvFile","Blob","type","a","document","createElement","href","URL","createObjectURL","setAttribute","body","appendChild","click","map","rodLength","index","dataRow","Math","abs"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\n\nfunction PostProcessorTable({ rodsSigmas, rodsLengths, objWithSolutionFunctions}) {\n    const [chosenRodForTable, setChosenRodForTable] = useState(1);\n    const [stepForTable, setStepForTable] = useState(0.1);\n    const [isStepForTableCorrect, setIsStepForTableCorrect] = useState(true);\n    const [isTableShown, setIsTableShown] = useState(false);\n    const [tableData, setTableData] = useState([]);\n\n    function fixTail(num, n = 5) {\n        const biasedNumStr = (num + 10 ** (-n - 1)).toFixed(n);\n        return Number(biasedNumStr);\n    }\n\n    function handleShowTableButtonClick() {\n        if (isStepForTableCorrect) {\n            let data = [];\n            let xStartPos = 0;\n            let totalIterations = parseInt(\n                rodsLengths[chosenRodForTable - 1] / Number(stepForTable),\n                10\n            );\n            for (let i = 0; i <= totalIterations; i++) {\n                data.push({\n                    x: fixTail(xStartPos),\n                    NValue: fixTail(objWithSolutionFunctions.N[chosenRodForTable - 1](\n                        fixTail(xStartPos))\n                    ),\n                    UValue: fixTail(objWithSolutionFunctions.U[chosenRodForTable - 1](\n                        fixTail(xStartPos))\n                    ),\n                    SValue: fixTail(objWithSolutionFunctions.S[chosenRodForTable - 1](\n                        fixTail(xStartPos))\n                    ),\n                });\n                xStartPos = fixTail(xStartPos + Number(stepForTable));\n            }\n            if (\n                totalIterations !==\n                rodsLengths[chosenRodForTable - 1] / Number(stepForTable)\n            ) {\n                data.push({\n                    x: rodsLengths[chosenRodForTable - 1],\n                    UValue: objWithSolutionFunctions.U[chosenRodForTable - 1](\n                        fixTail(rodsLengths[chosenRodForTable - 1])\n                    ),\n                    NValue: objWithSolutionFunctions.N[chosenRodForTable - 1](\n                        fixTail(rodsLengths[chosenRodForTable - 1])\n                    ),\n                    SValue: objWithSolutionFunctions.S[chosenRodForTable - 1](\n                        fixTail(rodsLengths[chosenRodForTable - 1])\n                    ),\n                });\n            }\n            setTableData(data);\n            setIsTableShown(true);\n        }\n    }\n\n    function handleStepForTableChange(e) {\n        const valueStr = e.target.value.replace(\",\", \".\");\n        if (\n            Number(valueStr) <= 0 ||\n            Number(valueStr) > rodsLengths[chosenRodForTable - 1] ||\n            isNaN(valueStr)\n        ) {\n            setIsStepForTableCorrect(false);\n        } else {\n            setIsStepForTableCorrect(true);\n        }\n        setStepForTable(valueStr);\n    }\n\n    function handleSavingTableData() {\n        if (isTableShown) {\n            const csvArr = [];\n            const rows = [[\"x\", \"N(x)\", \"U(x)\", \"S(x)\"]];\n            tableData.forEach((row) => {\n                rows.push([row.x, row.NValue, row.UValue, row.SValue]);\n            });\n            rows.forEach((row) => {\n                csvArr.push(row.join(\",\"));\n            });\n            const csvFile = new Blob([csvArr.join(\"\\n\")], { type: \"text/csv\" });\n            const a = document.createElement(\"a\");\n            a.href = URL.createObjectURL(csvFile);\n            a.setAttribute(\"download\", \"values.csv\");\n            document.body.appendChild(a);\n            a.click();\n        }\n    }\n\n    return (\n        <div className=\"post-processor-table\">\n            <div className=\"post-processor-table-interface\">\n                <div>\n                    Стержень\n                    <select\n                        value={chosenRodForTable}\n                        onChange={(e) =>\n                            setChosenRodForTable(Number(e.target.value))\n                        }>\n                        {rodsLengths.map((rodLength, index) => {\n                            return (\n                                <option key={index} value={index + 1}>{index + 1}</option>\n                            );\n                        })}\n                    </select>\n                </div>\n                <div>\n                    Шаг:\n                    <input\n                        className={`step-for-table-input ${\n                            isStepForTableCorrect ? null : `error`\n                        }`}\n                        type=\"number\"\n                        value={stepForTable}\n                        onChange={handleStepForTableChange}\n                    />\n                </div>\n                <div>\n                    <button onClick={handleShowTableButtonClick}>\n                        Показать результат\n                    </button>\n                </div>\n                <div>\n                    <button\n                        onClick={handleSavingTableData}>\n                        Сохранить результат\n                    </button>\n                </div>\n            </div>\n            {isTableShown ? (\n                <div>\n                    <table>\n                        <thead>\n                            <tr>\n                                <th>x</th>\n                                <th>N(x)</th>\n                                <th>U(x)</th>\n                                <th>σ(x)</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {tableData.map((dataRow, index) => {\n                                return (\n                                    <tr key={index}>\n                                        <td>{dataRow.x}</td>\n                                        <td>{dataRow.NValue}</td>\n                                        <td>{dataRow.UValue}</td>\n                                        <td className={Math.abs(dataRow.SValue) > rodsSigmas[chosenRodForTable - 1]? \"out-of-limit\" : null}>{dataRow.SValue}</td>\n                                    </tr>\n                                );\n                            })}\n                        </tbody>\n                    </table>\n                </div>\n            ) : null}\n        </div>\n    );\n}\n\nexport default PostProcessorTable;\n"]},"metadata":{},"sourceType":"module"}